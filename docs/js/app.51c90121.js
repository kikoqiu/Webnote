(()=>{"use strict";var t={82318:(t,e,n)=>{n(65363),n(10071);var o=n(98880),r=n(83525),a=n(83673);function i(t,e,n,o,r,i){const s=(0,a.up)("router-view");return(0,a.wg)(),(0,a.j4)(s)}const s=(0,a.aZ)({name:"App"});s.render=i;const c=s;var l=n(90857),d=n(47083),u=n(79582);const E=[{path:"/",component:()=>Promise.all([n.e(736),n.e(457)]).then(n.bind(n,33457)),children:[{path:"",component:()=>Promise.all([n.e(736),n.e(430)]).then(n.bind(n,56430))}]},{path:"/:catchAll(.*)*",component:()=>Promise.all([n.e(736),n.e(193)]).then(n.bind(n,32193))}],T=E,_=(0,d.BC)((function(){const t=u.r5,e=(0,u.p7)({scrollBehavior:()=>({left:0,top:0}),routes:T,history:t("")});return e}));async function f(t,e){const o="function"===typeof l["default"]?await(0,l["default"])({}):l["default"],{storeKey:a}=await Promise.resolve().then(n.bind(n,90857)),i="function"===typeof _?await _({store:o}):_;o.$router=i;const s=t(c);return s.use(r.Z,e),{app:s,store:o,storeKey:a,router:i}}const p={config:{}},m="";async function g({app:t,router:e,store:n,storeKey:o},r){let a=!1;const i=t=>{try{return e.resolve(t).href}catch(n){}return Object(t)===t?null:t},s=t=>{if(a=!0,"string"===typeof t&&/^https?:\/\//.test(t))return void(window.location.href=t);const e=i(t);null!==e&&(window.location.href=e,window.location.reload())},c=window.location.href.replace(window.location.origin,"");for(let d=0;!1===a&&d<r.length;d++)try{await r[d]({app:t,router:e,store:n,ssrContext:null,redirect:s,urlPath:c,publicPath:m})}catch(l){return l&&l.url?void s(l.url):void console.error("[Quasar] boot error:",l)}!0!==a&&(t.use(e),t.use(n,o),t.mount("#q-app"))}f(o.ri,p).then((t=>Promise.all([Promise.resolve().then(n.bind(n,94112)),Promise.resolve().then(n.bind(n,5474))]).then((e=>{const n=e.map((t=>t.default)).filter((t=>"function"===typeof t));g(t,n)}))))},5474:(t,e,n)=>{n.r(e),n.d(e,{default:()=>s,api:()=>i});var o=n(47083),r=n(30052),a=n.n(r);const i=a().create({baseURL:"https://api.example.com"}),s=(0,o.xr)((({app:t})=>{t.config.globalProperties.$axios=a(),t.config.globalProperties.$api=i}))},94112:(t,e,n)=>{n.r(e),n.d(e,{default:()=>c,i18n:()=>s});var o=n(47083),r=n(9262);const a={failed:"Action failed",success:"Action was successful"},i={"en-US":a},s=(0,r.o)({locale:"en-US",messages:i}),c=(0,o.xr)((({app:t})=>{t.use(s)}))},17961:(t,e,n)=>{n.d(e,{vc:()=>i,L6:()=>l,kT:()=>m,ln:()=>L,Go:()=>d,f_:()=>O,Pn:()=>N,F5:()=>c,an:()=>h,jO:()=>E,QX:()=>_,M2:()=>p,$3:()=>A,bW:()=>s,Pp:()=>f,Mp:()=>T,Qk:()=>g});var o=n(30052),r=n.n(o);function a(t){return new Promise((e=>setTimeout(e,t)))}var i={url:null,token:null,config(t={}){return{params:{token:this.token,...t}}}};async function s(t,e=30){let n=await r().post(t+"/auth",JSON.stringify({}));console.log(n.data);let o=n.data.auth_token;for(let i=0;i<e;++i)if(await a(1e3),n=await r().get(t+"/auth/check?auth_token="+o),console.log(n.data),"waiting"!=n.data.status)break;return"accepted"==n.data.status?n.data.token:null}function c(){return new Promise(((t,e)=>{r().get(i.url+"/folders/",i.config()).then((e=>{t(e.data.items)})).catch((t=>{e(t.statusText)}))}))}function l(t){return new Promise(((e,n)=>{r().post(i.url+"/folders/",t,i.config()).then((t=>{e(t.data)})).catch((t=>{n(t.statusText)}))}))}function d(t){return new Promise(((e,n)=>{r()["delete"](i.url+"/folders/"+t,i.config()).then((t=>{e(t.data)})).catch((t=>{n(t.statusText)}))}))}async function u(t,e){let n=[];for(let o=1;o<100;++o){let a=await r().get(t,i.config({page:o,...e}));if(n=n.concat(a.data.items),!a.data.has_more)break}return n}async function E(t){return await u(i.url+"/notes",t)}async function T(t){return await u(i.url+"/search",t)}async function _(t,e){return await u(i.url+`/folders/${t}/notes`,e)}function f(t){return new Promise(((e,n)=>{r().get(i.url+`/notes/${t}`,i.config({fields:"id,parent_id,title,body,created_time,updated_time,is_conflict,latitude,longitude,altitude,author,source_url,is_todo,todo_due,todo_completed,source,source_application,application_data,order,user_created_time,user_updated_time,encryption_cipher_text,encryption_applied,markup_language,is_shared,share_id,conflict_original_id"})).then((t=>{e(t.data)})).catch((t=>{n(t.statusText)}))}))}function p(t){return new Promise(((e,n)=>{r().get(i.url+`/tag/${t}/notes`,i.config()).then((t=>{e(t.data)})).catch((t=>{n(t.statusText)}))}))}async function m(t){console.log(t);let e=await r().post(i.url+"/notes",t,i.config());return e.data}async function g(t){console.log(t);let e=await r().put(i.url+"/notes/"+t.id,t,i.config());return e.data}function O(t){return new Promise(((e,n)=>{r()["delete"](i.url+"/notes/"+t,i.config()).then((t=>{e(t.data)})).catch((t=>{n(t.statusText)}))}))}function h(t){return new Promise(((e,n)=>{r().get(i.url+"/notes/"+t.id+"/tags",i.config()).then((t=>{e(t.data.items)})).catch((t=>{n(t.statusText)}))}))}function A(){return new Promise(((t,e)=>{r().get(i.url+"/tags/",i.config()).then((e=>{t(e.data.items)})).catch((t=>{e(t.statusText)}))}))}function L(t){return new Promise(((e,n)=>{r().post(i.url+"/tags/",t,i.config()).then((t=>{e(t.data)})).catch((t=>{n(t.statusText)}))}))}function N(t){return new Promise(((e,n)=>{r()["delete"](i.url+"/tags/"+t,i.config()).then((t=>{e(t.data)})).catch((t=>{n(t.statusText)}))}))}},20496:(t,e,n)=>{n.r(e),n.d(e,{FOLDER_FETCH_ALL:()=>a,FOLDER_FETCH:()=>i,FOLDER_CREATE:()=>s,FOLDER_DELETE:()=>c});var o=n(17961),r=n(2863);async function a({commit:t}){t(r.ZP.FOLDER_SET_ALL,await o.F5())}async function i({commit:t},e){t(r.ZP.FOLDER_SET,e)}async function s({commit:t},e){t(r.ZP.FOLDER_APPEND,await o.L6(e))}async function c({commit:t},e){await o.Go(e),t(r.ZP.FOLDER_REMOVE,e)}},39461:(t,e,n)=>{function o(t){return t.folders}function r(t,e){return t=>e.getFolders.filter((e=>e.parent_id===t))}n.r(e),n.d(e,{getFolders:()=>o,getFolderById:()=>r})},2863:(t,e,n)=>{n.d(e,{ZP:()=>E});const o="FOLDER_SET_ALL",r="FOLDER_SET",a="FOLDER_APPEND",i="FOLDER_CHANGE",s="FOLDER_REMOVE",c="FOLDER_FETCH_ALL",l="FOLDER_FETCH",d="FOLDER_CREATE",u="FOLDER_DELETE",E={FOLDER_SET_ALL:o,FOLDER_SET:r,FOLDER_APPEND:a,FOLDER_CHANGE:i,FOLDER_REMOVE:s,FOLDER_FETCH_ALL:c,FOLDER_FETCH:l,FOLDER_CREATE:d,FOLDER_DELETE:u}},90857:(t,e,n)=>{n.r(e),n.d(e,{default:()=>lt});var o={};n.r(o),n.d(o,{someGetter:()=>f});var r={};n.r(r),n.d(r,{setAuth:()=>p,showlogin:()=>m});var a={};n.r(a),n.d(a,{getAuthToken:()=>g});var i={};n.r(i),n.d(i,{FOLDER_APPEND:()=>v,FOLDER_CHANGE:()=>y,FOLDER_REMOVE:()=>w,FOLDER_SET:()=>N,FOLDER_SET_ALL:()=>L});var s={};n.r(s),n.d(s,{NOTETAG_SET:()=>D,NOTE_APPEND:()=>H,NOTE_CHANGE:()=>k,NOTE_REMOVE:()=>x,NOTE_SET:()=>S,NOTE_SET_ALL:()=>b,NOTE_SET_QUERY:()=>R});var c={};n.r(c),n.d(c,{getTagById:()=>$,getTags:()=>V});var l={};n.r(l),n.d(l,{TAG_APPEND:()=>et,TAG_CHANGE:()=>nt,TAG_REMOVE:()=>ot,TAG_SET:()=>tt,TAG_SET_ALL:()=>z});var d={};n.r(d),n.d(d,{TAG_CREATE:()=>it,TAG_DELETE:()=>st,TAG_FETCH:()=>at,TAG_FETCH_ALL:()=>rt});var u=n(47083),E=n(93617),T=n(17961);function _(){let t=localStorage.getItem("url"),e=localStorage.getItem("token");return T.vc.url=t,T.vc.token=e,{url:t,token:e,show_login:!e}}function f(){}function p(t,{url:e,token:n}){t.url=e,t.token=n,t.show_login=!1,T.vc.url=e,T.vc.token=n,localStorage.setItem("url",e),localStorage.setItem("token",n)}function m(t,e){t.show_login=e}async function g(t,e){let n=await T.bW(e);null!=n&&t.commit("setAuth",{url:e,token:n})}const O={namespaced:!0,getters:o,mutations:r,actions:a,state:_};function h(){return{folder:{},folders:[]}}var A=n(39461);n(2863);const L=(t,e)=>{t.folders=e},N=(t,e)=>{t.folder=e},v=(t,e)=>{t.folders.push(e)},y=(t,e)=>{const n=t.folders.find((t=>t.id===e.id));t.folders.splice(t.folders.indexOf(n),1,e)},w=(t,e)=>{const n=t.folders.find((t=>t.id===e));t.folders.splice(t.folders.indexOf(n),1)};var P=n(20496);const F={namespaced:!0,getters:A,mutations:i,actions:P,state:h};function C(){return{note:{id:0,title:"",body:"",parent:{id:0,parent_id:0},parent_id:void 0,is_todo:0,todo_due:0,todo_completed:0,created_time:0,updated_time:0,source_url:"",author:"",latitude:0,longitude:0,altitude:0,source:"",source_application:""},tag:[],notes:[],param:{query:"",order_by:"updated_time",order_dir:"DESC"}}}var G=n(63676);n(99595);const R=(t,e)=>{t.param.query=e},b=(t,e)=>{t.notes=e},S=(t,e)=>{t.note=e},D=(t,e)=>{t.tag=e},H=(t,e)=>{t.notes.push(e)},k=(t,e)=>{const n=t.notes.find((t=>t.id===e.id)),o=t.notes.indexOf(n);console.log(`find note ${null===n||void 0===n?void 0:n.id} as pos ${o}`),-1==o?t.notes.splice(0,0,e):t.notes.splice(o,1,e)},x=(t,e)=>{const n=t.notes.find((t=>t.id===e));t.notes.splice(t.notes.indexOf(n),1),t.note={id:0,title:"",body:"",parent:{id:0,parent_id:0},parent_id:void 0,is_todo:0}};var M=n(87072);const Z={namespaced:!0,getters:G,mutations:s,actions:M,state:C};function j(){return{tag:{id:"",title:""},tags:[]}}const V=t=>t.tags,$=(t,e)=>t=>e.getTags.filter((e=>e.id===t)),I="TAG_SET_ALL",Q="TAG_SET",U="TAG_APPEND",B="TAG_CHANGE",q="TAG_REMOVE",W="TAG_FETCH_ALL",K="TAG_FETCH",Y="TAG_CREATE",X="TAG_DELETE",J={TAG_SET_ALL:I,TAG_SET:Q,TAG_APPEND:U,TAG_CHANGE:B,TAG_REMOVE:q,TAG_FETCH_ALL:W,TAG_FETCH:K,TAG_CREATE:Y,TAG_DELETE:X},z=(t,e)=>{t.tags=e},tt=(t,e)=>{t.tag=e},et=(t,e)=>{t.tags.push(e)},nt=(t,e)=>{const n=t.tags.find((t=>t.id===e.id));t.tags.splice(t.tags.indexOf(n),1,e)},ot=(t,e)=>{const n=t.tags.find((t=>t.id===e));t.tags.splice(t.tags.indexOf(n),1)},rt=async({commit:t})=>{t(J.TAG_SET_ALL,await T.$3())},at=async({commit:t},e)=>{t(J.TAG_SET,e)},it=async({commit:t},e)=>{t(J.TAG_APPEND,await T.ln(e))},st=async({commit:t},e)=>{await T.Pn(e),t(J.TAG_REMOVE,e)},ct={namespaced:!0,getters:c,mutations:l,actions:d,state:j},lt=(0,u.h)((function(){const t=(0,E.MT)({modules:{auth:O,folders:F,notes:Z,tags:ct},strict:!1});return t}))},87072:(t,e,n)=>{n.r(e),n.d(e,{NOTE_NEW:()=>a,NOTE_FETCH_PAGE:()=>i,NOTE_FETCH_AUTO:()=>s,NOTE_FETCH_ALL:()=>c,NOTE_FETCH_TAG:()=>l,NOTE_FETCH_FOLDER:()=>d,GET_NOTE:()=>u,NOTE_CREATE:()=>E,NOTE_CHANGE:()=>T,NOTE_REMOVE:()=>_,NOTETAG_SET:()=>f});var o=n(17961),r=n(99595);async function a({commit:t,rootState:e}){var n;const o={title:"",body:"",parent_id:null===(n=e.folders.folder)||void 0===n?void 0:n.id,is_todo:0,tag:null};t(r.ZP.NOTE_SET,o)}const i=async({commit:t},e)=>{t(r.ZP.NOTE_SET_ALL,e)};async function s(t){let{commit:e,state:n,rootState:a,dispatch:i}=t;n.param.query?await e(r.ZP.NOTE_SET_ALL,await o.Mp(n.param)):a.folders.folder?await i("NOTE_FETCH_FOLDER",a.folders.folder):await i("NOTE_FETCH_ALL")}const c=async({commit:t,state:e})=>{t(r.ZP.NOTE_SET_ALL,await o.jO(e.param))},l=async({commit:t,state:e},n)=>{t(r.ZP.NOTE_SET_ALL,await o.M2(n.id,e.param))},d=async({commit:t,state:e},n)=>{t(r.ZP.NOTE_SET_ALL,await o.QX(n.id,e.param))},u=async({commit:t,dispatch:e},n)=>{t(r.ZP.NOTE_SET,await o.Pp(n.id)),await e("NOTETAG_SET",n)},E=async({commit:t},e)=>{await o.kT(e),t(r.ZP.NOTE_APPEND,e)},T=async({commit:t},e)=>{console.log("NOTE_CHANGE"),e=e.id?await o.Qk(e):await o.kT(e),t(r.ZP.NOTE_CHANGE,e)},_=async({commit:t},e)=>{await o.f_(e),t(r.ZP.NOTE_REMOVE,e)},f=async({commit:t},e)=>{t(r.ZP.NOTETAG_SET,await o.an(e))}},63676:(t,e,n)=>{function o(t){const e=t,n=[];for(const r in e){const t={id:e[r].id,label:e[r].title};void 0!==e[r].children&&(t.children=o(e[r].children)),n.push(t)}return n}n.r(e),n.d(e,{getTreeChildren:()=>o,getNote:()=>r,getNotes:()=>a,getFolders2:()=>i,getTreeFolders:()=>s,getTags2:()=>c,getTreeTags:()=>l});const r=t=>t.note,a=t=>t.notes;function i(t,e,n,o){return o["folders/getFolders"]}function s(t,e,n,r){const a=e.getFolders2,i=[];for(const s in a){const t={id:a[s].id,label:a[s].title};void 0!==a[s].children&&(t.children=o(a[s].children)),i.push(t)}return i}function c(t,e,n,o){return o["tags/getTags"]}function l(t,e,n,o){const r=e.getTags2,a=[];for(const i in r){const t={id:r[i].id,label:r[i].title};a.push(t)}return a}},99595:(t,e,n)=>{n.d(e,{Gk:()=>s,op:()=>c,Mg:()=>f,H3:()=>m,ZP:()=>g});const o="NOTE_SET_ALL",r="SET_QUERY_STRING",a="NOTE_SET",i="NOTE_APPEND",s="NOTE_CHANGE",c="NOTE_REMOVE",l="NOTE_CREATE",d="NOTE_DELETE",u="NOTE_FETCH_ALL",E="NOTE_FETCH_FOLDER",T="NOTE_FETCH_TAG",_="NOTE_FETCH_PAGE",f="NOTE_NEW",p="NOTETAG_SET",m="GET_NOTE",g={NOTE_SET_ALL:o,SET_QUERY_STRING:r,NOTE_SET:a,NOTE_APPEND:i,NOTE_CHANGE:s,NOTE_REMOVE:c,NOTE_CREATE:l,NOTE_DELETE:d,NOTE_FETCH_ALL:u,NOTE_FETCH_FOLDER:E,NOTE_FETCH_TAG:T,NOTE_FETCH_PAGE:_,NOTE_NEW:f,NOTETAG_SET:p}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var a=e[o]={id:o,loaded:!1,exports:{}};return t[o].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=t,(()=>{var t=[];n.O=(e,o,r,a)=>{if(!o){var i=1/0;for(d=0;d<t.length;d++){for(var[o,r,a]=t[d],s=!0,c=0;c<o.length;c++)(!1&a||i>=a)&&Object.keys(n.O).every((t=>n.O[t](o[c])))?o.splice(c--,1):(s=!1,a<i&&(i=a));if(s){t.splice(d--,1);var l=r();void 0!==l&&(e=l)}}return e}a=a||0;for(var d=t.length;d>0&&t[d-1][2]>a;d--)t[d]=t[d-1];t[d]=[o,r,a]}})(),(()=>{n.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return n.d(e,{a:e}),e}})(),(()=>{n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}})(),(()=>{n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,o)=>(n.f[o](t,e),e)),[]))})(),(()=>{n.u=t=>"js/"+t+"."+{193:"05918590",430:"5d708d1a",457:"27f76879"}[t]+".js"})(),(()=>{n.miniCssF=t=>"css/"+({143:"app",736:"vendor"}[t]||t)+"."+{143:"31d6cfe0",457:"e272ecaa",736:"a14e89e4"}[t]+".css"})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{var t={},e="webnote:";n.l=(o,r,a,i)=>{if(t[o])t[o].push(r);else{var s,c;if(void 0!==a)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==e+a){s=u;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",e+a),s.src=o),t[o]=[r];var E=(e,n)=>{s.onerror=s.onload=null,clearTimeout(T);var r=t[o];if(delete t[o],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((t=>t(n))),e)return e(n)},T=setTimeout(E.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=E.bind(null,s.onerror),s.onload=E.bind(null,s.onload),c&&document.head.appendChild(s)}}})(),(()=>{n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t)})(),(()=>{n.p=""})(),(()=>{var t=(t,e,n,o)=>{var r=document.createElement("link");r.rel="stylesheet",r.type="text/css";var a=a=>{if(r.onerror=r.onload=null,"load"===a.type)n();else{var i=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.href||e,c=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=i,c.request=s,r.parentNode.removeChild(r),o(c)}};return r.onerror=r.onload=a,r.href=e,document.head.appendChild(r),r},e=(t,e)=>{for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var r=n[o],a=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(a===t||a===e))return r}var i=document.getElementsByTagName("style");for(o=0;o<i.length;o++){r=i[o],a=r.getAttribute("data-href");if(a===t||a===e)return r}},o=o=>new Promise(((r,a)=>{var i=n.miniCssF(o),s=n.p+i;if(e(i,s))return r();t(o,s,r,a)})),r={143:0};n.f.miniCss=(t,e)=>{var n={457:1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=o(t).then((()=>{r[t]=0}),(e=>{throw delete r[t],e})))}})(),(()=>{var t={143:0};n.f.j=(e,o)=>{var r=n.o(t,e)?t[e]:void 0;if(0!==r)if(r)o.push(r[2]);else{var a=new Promise(((n,o)=>r=t[e]=[n,o]));o.push(r[2]=a);var i=n.p+n.u(e),s=new Error,c=o=>{if(n.o(t,e)&&(r=t[e],0!==r&&(t[e]=void 0),r)){var a=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;s.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,r[1](s)}};n.l(i,c,"chunk-"+e,e)}},n.O.j=e=>0===t[e];var e=(e,o)=>{var r,a,[i,s,c]=o,l=0;if(i.some((e=>0!==t[e]))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(c)var d=c(n)}for(e&&e(o);l<i.length;l++)a=i[l],n.o(t,a)&&t[a]&&t[a][0](),t[i[l]]=0;return n.O(d)},o=self["webpackChunkwebnote"]=self["webpackChunkwebnote"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))})();var o=n.O(void 0,[736],(()=>n(82318)));o=n.O(o)})();